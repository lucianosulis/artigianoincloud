{% extends 'base.html' %}

{% block header %}
  <h4>{% block title %}Modifica attività{% endblock %}</h4>
  
{% endblock %}

{% block content %}

  <form method="post" onsubmit="afterSubmit()">
    <label for="title">Titolo</label>
    <input name="title" id="title" value="{{ request.form['title'] or act['title'] }}" required>
    <label for="start">Data inizio attività</label>
    <input name="start" id="start" type="date" value="{{ request.form['start'] or act['start'] }}" required>
    <label for="end">Data fine attività</label>
    <input name="end" id="end" type="date" value="{{ request.form['end'] or act['end'] }}" required>
    <label for="order_desc">Ordine</label>
    <input name="order_desc" id="order_desc" type="text" value="{{ order_desc['order_desc'] }}" readonly>
    <input name="order_id" id="order_id" type="text" value="{{ order_id }}" hidden>
    <input name="url" id="url" value="{{ url_for('order.select') }}" hidden>
    <input type="button" onclick="open_order_select()" value="Seleziona ordine">
    <label for="site_id">Sede</label>
    <SELECT id="site_id">
      {% for site in siteList %}
        {% if site.id == act['site_id'] %}
          <OPTION value={{site.id}} selected>{{site.city}} - {{site.address}}</option>
        {% else %}
          <OPTION value={{site.id}}>{{site.city}} - {{site.address}}</option>
        {% endif %}
      {% endfor %} 
    </SELECT>
    <label for="description">Descrizione lavorazioni</label>
    <textarea name="description" id="description">{{ request.form['description'] or act['description'] }}</textarea>
    <input name="input_site_id" id="input_site_id" hidden>
    <br>
    <input type="submit" value="Salva">
    <!--<input class="action" type="submit" value="Annulla" onclick="history.back()">-->
    <input class="action" style="height:30px; width:160px" type="button" onclick="goBack()" value="Annulla">
    {% if show_calendar == "Y" %}
      <input name="goback" id="goback" value="{{ url_for('calendar.show_cal') }}" hidden>
    {% else %}
      <input name="goback" id="goback" value="{{ url_for('activity.index') }}" hidden>
    {% endif %}
  </form>
  <form action="{{ url_for('activity.delete', id=act['id']) }}" method="post">
    <input class="danger" type="submit" value="Elimina" onclick="return confirm('Sei sicuro di eliminare questa attività?');">
  </form>
  <hr>
  
  <script type="text/javascript" src="/static/activity/common.js"></script>
  <script>
      function goBack() {
        window.location.assign(document.getElementById("goback").value);
      }
  </script>

{% endblock %}
